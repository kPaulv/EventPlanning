@{
	ViewData["Title"] = "Home Page";
	@model EventPlanning.Models.Output.EventsDisplayModel;
	ViewData["Error"] = "Error. No events found.";
}

<div class="text-center">
	<h1 class="display-4">Event Manager</h1>
	<br />
	@{
		if (Model is null)
		{
			<h2 class="display-5">@ViewData["Error"]</h2>
		}
		else
		{
			if (Model.IsAdminUser)
			{
				<button id="create-event-btn" type="button" 
					class="btn-sm" 
					onclick="document.location.href = '@Url.Action("Index", "Event")'">
					Create New Event
					</button>
				<br/>
				<br/>
			}
			<table class="table table-hover table-bordered">
				<tr>
					<th>Event</th>
					<th>Topic</th>
					<th>Subtopic</th>
					<th>Dresscode</th>
					<th>Participants</th>
					<th>Location</th>
				</tr>
				@foreach (EventPlanning.Data.Entities.Event e in Model.Events)
				{
					<tr>
						<td>@e.Name</td>
						<td>@e.Type.Name</td>
						<td>
								<ul class="list-group">
									@foreach (EventPlanning.Data.Entities.EventSubtype s in e.Type.Subtypes)
									{
										<li class="list-group-item" style="border: none">@s.Name</li>
									}
								</ul>
						</td>
						<td>@e.Dresscode</td>
						<td>@e.Participants</td>
						<td>@e.Location</td>
					</tr>
				}
			</table>
		}
	}
</div>

<script type="text/javascript">
	function CreateEvent(){
		document.location.href = '@Url.Action("Index", "Event")';
	}
	$('create-event-btn').click(function () {
		document.location = @Url.Action("Index","Event");
	});
</script>
